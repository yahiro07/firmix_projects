# RP2040-GEEK シリアルモニタ

RP2040 GEEKで使ったデバッグ用のシリアルモニタです。
UARTで受信した文字列を表示します。

ArduinoやPlatformIOで開発をするときに、USBの仮想シリアルポート経由でデバッグができますが、PC上でスケッチの書き込み時に毎回ツールを切り替えたりするのに手間がかかってしまうことがあります。

このプロジェクトでは、RP2040-GEEKのLCDにUARTで受け取った文字列を表示して、ハードウェアシリアルの出力を簡単に確認できるようにしました。

9600bps, 38400bps, 115200bpsの3つのボーレートに対応しています。

## 配線


||ターゲットボード|配線色|GEEK|
|--|--|--|--|
|1|GND|黒|GND|
|2|3.3V供給|赤|3.3V|
|3|NC|橙|--
|4|UART TX|黄|UART RX

RP2040-Geekに付属している4本線のケーブルを使います。
RP2040-Geekはケーブル経由の3.3Vの電源供給で動くので、USBで電源を供給する必要はありません。  
赤と黒の線をターゲットのボードの電源ラインにつなぎます。  
黄色の線をマイコンのUART出力ピン(TX)につなぎます。


### 配線例
![](https://i.gyazo.com/9a828c041cc4e5103ff0a381adc137f9.jpg)

KB2040のTXピン(GPIO0)に黄色の配線を繋いで、UARTによるデバッグ出力をモニターしています。

## 設定

RP2040-GEEKの側面についているボタンを使って、ボーレートと文字サイズの変更ができます。

### ボーレートの設定

ボタンを短く押すと、ボーレートが切り替わります。  
9600bps-->38400bps-->115200bps-->9600bps...の順で切り替わります。  
起動したときのデフォルトのボーレートは38400bpsです。

### 文字サイズの設定

ボタンを長押しすると、フォントのサイズが切り替わります。  
大小2つのフォントサイズがあります。  
起動したときのデフォルトのフォントサイズは「大」です。

#### 文字サイズ「大」の表示
![](https://i.gyazo.com/b0bfc071fcbd61a1f167af921a5a88c5.png)

#### 文字サイズ「小」の表示
![](https://i.gyazo.com/56fff20beb4b1bf155df50176d99416e.png)

文字数は横幅いっぱい(各行38文字)まで出ます。

## その他

### シリアル受信インジケータ

画面に右上にシリアル信号を受信したことを示すインジケータがあります。  
シリアル信号を受診すると、インジケータの表示が1ステップずつ右にシフトします。  
ボーレートの設定がターゲットボードとあっていない場合に、UARTで文字列を送ってもログが表示されない状況になるときがありますが、この際に信号が受信できているかどうかを示すためにこのインジケータの表示を設けています。

インジケータは反応しているけれどログが表示されないとき(や、ログが文字化けするとき)はボーレートがあっていないのでボタンを押してボーレートを切り替えてください。




